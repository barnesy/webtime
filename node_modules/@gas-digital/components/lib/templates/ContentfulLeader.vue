<template>
  <Leaf>
    <PageSection padding="0 8rem">
      <Split class="flip">
        <template #image>
          <g-image :src="$page.contentfulLeader.image.file.url" :alt="$page.contentfulLeader.image.description" />
        </template>

        <template>
          <h1>{{ $page.contentfulLeader.name }}</h1>
          <p>{{ $page.contentfulLeader.jobTitle }}</p>
        </template>
      </Split>
    </PageSection>

    <PageSection padding="3rem 3rem 8rem" class="narrow">
      <div v-html="content" />
    </PageSection>
  </Leaf>
</template>


<page-query>
  query ($id: ID) {
    contentfulLeader(id: $id) {
      name
      slug
      content
      jobTitle
      image {
          description
          file {
            url
          }
        }
    }
  }
</page-query>

<script>
import MarkdownIt from 'markdown-it'

export default {
  metaInfo() {
    return {
      title: "Leadership: " + this.$page.contentfulLeader.name,
      meta: [
        {
          name: 'description',
          content: this.$page.contentfulLeader.name + ": " + this.$page.contentfulLeader.jobTitle
        },
        {
          property: 'og:title',
          content: "Leadership: " + this.$page.contentfulLeader.name
        },
        {
          property: 'og:description',
          content: this.$page.contentfulLeader.name + " : " + this.$page.contentfulLeader.jobTitle
        },
        {
          property: 'og:image',
          content: 'https:' + this.$page.contentfulLeader.image.file.url
        },
        {
          property: 'og:url',
          content: this.$context.url + this.$page.contentfulLeader.slug
        },
      ],
    }
  },

  computed: {
    content() {
      const md = new MarkdownIt()
      return md.render(this.$page.contentfulLeader.content)
    },
  }
}
</script>
